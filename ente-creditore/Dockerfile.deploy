FROM openjdk:8-alpine
ARG JAR_FILE=./target/ente-creditore*.jar

EXPOSE 2222 80
COPY ${JAR_FILE} /home/application.jar

COPY ${JAR_FILE} /home/application.jar
ENV SSH_PASSWD "root:Docker!"
RUN apk --no-cache add openssh openrc
RUN echo "root:Docker!" | chpasswd
COPY sshd_config /etc/ssh/
RUN rc-update add sshd
RUN openrc
RUN touch /run/openrc/softlevel
RUN /etc/init.d/sshd start
ENTRYPOINT ["java", "-Dserver.port=80", "-jar", "/home/application.jar"]